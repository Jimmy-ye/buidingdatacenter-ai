# ç§»åŠ¨ç«¯å¼€å‘è®¡åˆ’ - å·¥ç¨‹ç»“æ„æµè§ˆåŠŸèƒ½

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

**åŠŸèƒ½åç§°**ï¼šå·¥ç¨‹ç»“æ„æµè§ˆ
**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
**é¢„è®¡å·¥æœŸ**ï¼š3-4 å¤©
**ä¾èµ–**ï¼šåç«¯ APIï¼ˆå·²å®Œæˆï¼‰

---

## ğŸ¯ ç”¨æˆ·æ•…äº‹

> ä½œä¸ºç°åœºå·¥ç¨‹å¸ˆï¼Œæˆ‘éœ€è¦åœ¨ç§»åŠ¨ç«¯æµè§ˆé¡¹ç›®çš„å·¥ç¨‹ç»“æ„ï¼ˆæ¥¼æ ‹-åŒºåŸŸ-ç³»ç»Ÿ-è®¾å¤‡ï¼‰ï¼Œä»¥ä¾¿å¿«é€Ÿå®šä½åˆ°æˆ‘è¦æ£€æŸ¥çš„è®¾å¤‡å¹¶ä¸Šä¼ èµ„äº§ç…§ç‰‡ã€‚

---

## ğŸ“± åŠŸèƒ½éœ€æ±‚

### 1. é¡¹ç›®åˆ—è¡¨é¡µ

**å±å¹•**ï¼š`ProjectListPage`
**è·¯ç”±**ï¼š`/projects`

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºæ‰€æœ‰å¯è®¿é—®çš„é¡¹ç›®
- æ¯ä¸ªé¡¹ç›®æ˜¾ç¤ºï¼šåç§°ã€ç±»å‹ã€çŠ¶æ€
- ç‚¹å‡»é¡¹ç›®è¿›å…¥å·¥ç¨‹ç»“æ„é¡µ

**UI è‰å›¾**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜°  å·¥ç¨‹é¡¹ç›®                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” æœç´¢é¡¹ç›®...                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¢ é•¿æ²™-å·¥å‚A                       â”‚
â”‚     çŠ¶æ€: è¿›è¡Œä¸­ | ç±»å‹: å·¥ä¸š        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¢ åŒ—äº¬-å†™å­—æ¥¼B                     â”‚
â”‚     çŠ¶æ€: è¿›è¡Œä¸­ | ç±»å‹: å•†ä¸š        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¢ ä¸Šæµ·-å•†åœºC                       â”‚
â”‚     çŠ¶æ€: å·²å®Œæˆ | ç±»å‹: å•†ä¸š        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. å·¥ç¨‹ç»“æ„æµè§ˆé¡µ

**å±å¹•**ï¼š`StructureTreePage`
**è·¯ç”±**ï¼š`/projects/:id/structure`

**åŠŸèƒ½**ï¼š
- æ ‘å½¢å±•ç¤ºï¼šBuilding â†’ Zone â†’ System â†’ Device
- æ”¯æŒå±•å¼€/æŠ˜å èŠ‚ç‚¹
- æ˜¾ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„èµ„äº§æ•°é‡
- ç‚¹å‡»è®¾å¤‡è¿›å…¥èµ„äº§åˆ—è¡¨é¡µ

**UI è‰å›¾**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† å·¥ç¨‹ç»“æ„ | é•¿æ²™-å·¥å‚A             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¼ 1å·å‚æˆ¿                          â”‚
â”‚    â–¼ 5å±‚                            â”‚
â”‚      â–¼ HVACç³»ç»Ÿ (3è®¾å¤‡)             â”‚
â”‚        ğŸ”§ å†·æ°´æœºç»„-CH-001 [5å¼ ç…§ç‰‡]  â”‚
â”‚        ğŸ”§ å†·å´å¡”-CT-001   [2å¼ ç…§ç‰‡]  â”‚
â”‚        ğŸ”§ é£æœºç›˜ç®¡-FCU-001 [0å¼ ç…§ç‰‡] â”‚
â”‚      â–¶ ç…§æ˜ç³»ç»Ÿ                      â”‚
â”‚    â–¶ 6å±‚                             â”‚
â”‚  â–¶ 2å·å‚æˆ¿                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. è®¾å¤‡èµ„äº§åˆ—è¡¨é¡µ

**å±å¹•**ï¼š`DeviceAssetsPage`
**è·¯ç”±**ï¼š`/devices/:id/assets`

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºè¯¥è®¾å¤‡çš„æ‰€æœ‰èµ„äº§ï¼ˆç…§ç‰‡ï¼‰
- ç½‘æ ¼å±•ç¤ºå›¾ç‰‡ç¼©ç•¥å›¾
- ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾å’Œè¯¦æƒ…
- æ˜¾ç¤ºä¸Šä¼ æ—¶é—´ã€å¤‡æ³¨ç­‰ä¿¡æ¯

**UI è‰å›¾**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† å†·æ°´æœºç»„-CH-001        ğŸ“· ğŸ“·     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [å›¾1]  â”‚  â”‚ [å›¾2]  â”‚  â”‚ [å›¾3]  â”‚â”‚
â”‚  â”‚ ç°åœº   â”‚  â”‚ é“­ç‰Œ   â”‚  â”‚ ç°åœº   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ [å›¾4]  â”‚  â”‚ [å›¾5]  â”‚            â”‚
â”‚  â”‚ ç°åœº   â”‚  â”‚ ç°åœº   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ API æ¥å£

### 1. è·å–é¡¹ç›®åˆ—è¡¨

```http
GET /api/v1/projects
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
[
  {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "name": "é•¿æ²™-å·¥å‚A",
    "customer_name": "æŸæŸå…¬å¸",
    "status": "in_progress",
    "created_at": "2025-01-01T00:00:00Z"
  }
]
```

---

### 2. è·å–å·¥ç¨‹ç»“æ„æ ‘

```http
GET /api/v1/projects/{project_id}/structure_tree
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "project_id": "550e8400-e29b-41d4-a716-446655440000",
  "project_name": "é•¿æ²™-å·¥å‚A",
  "buildings": [
    {
      "id": "bld-001",
      "name": "1å·å‚æˆ¿",
      "usage_type": "production",
      "zones": [
        {
          "id": "zone-001",
          "name": "5å±‚",
          "systems": [
            {
              "id": "sys-001",
              "name": "HVACç³»ç»Ÿ",
              "type": "hvac",
              "devices": [
                {
                  "id": "dev-001",
                  "model": "å†·æ°´æœºç»„-CH-001",
                  "device_type": "chiller",
                  "asset_count": 5
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```

---

### 3. è·å–è®¾å¤‡èµ„äº§åˆ—è¡¨

```http
GET /api/v1/assets/?device_id={device_id}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
[
  {
    "id": "asset-001",
    "title": "ç°åœºç…§ç‰‡-001.jpg",
    "modality": "image",
    "source": "mobile",
    "content_role": "scene_issue",
    "description": "å†·å‡å™¨å¤–è¡¨é¢ç§¯ç°ä¸¥é‡",
    "created_at": "2026-01-23T10:30:00Z",
    "download_url": "/api/v1/assets/asset-001/download"
  }
]
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç›®å½•ç»“æ„ï¼ˆé˜¶æ®µ1æœ€å°åŒ–ï¼‰

```
mobile/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                    # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ api_config.dart          # API é…ç½®
â”‚   â”œâ”€â”€ models/                      # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ project.dart
â”‚   â”‚   â”œâ”€â”€ structure.dart
â”‚   â”‚   â””â”€â”€ asset.dart
â”‚   â”œâ”€â”€ services/                    # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ api_service.dart
â”‚   â”‚   â””â”€â”€ structure_service.dart
â”‚   â””â”€â”€ ui/
â”‚       â””â”€â”€ pages/
â”‚           â”œâ”€â”€ project_list_page.dart
â”‚           â”œâ”€â”€ structure_tree_page.dart
â”‚           â””â”€â”€ device_assets_page.dart
â””â”€â”€ pubspec.yaml                     # ä¾èµ–é…ç½®
```

---

## ğŸ“¦ æ ¸å¿ƒä¾èµ–

```yaml
dependencies:
  flutter:
    sdk: flutter

  # HTTP è¯·æ±‚
  http: ^1.2.0

  # çŠ¶æ€ç®¡ç†ï¼ˆè½»é‡çº§ï¼‰
  provider: ^6.1.1

  # è·¯ç”±
  go_router: ^14.0.0

  # JSON åºåˆ—åŒ–
  json_annotation: ^4.9.0
  freezed_annotation: ^2.4.1

dev_dependencies:
  flutter_test:
    sdk: flutter

  # ä»£ç ç”Ÿæˆ
  build_runner: ^2.4.0
  json_serializable: ^6.8.0
  freezed: ^2.5.2
```

---

## ğŸ¨ UI ç»„ä»¶è®¾è®¡

### 1. é¡¹ç›®å¡ç‰‡ç»„ä»¶

```dart
class ProjectCard extends StatelessWidget {
  final Project project;
  final VoidCallback onTap;

  @override
  Widget build(BuildContext context) {
    return Card(
      child: ListTile(
        leading: Icon(Icons.business),
        title: Text(project.name),
        subtitle: Text('${project.status} | ${project.customerName}'),
        trailing: Icon(Icons.chevron_right),
        onTap: onTap,
      ),
    );
  }
}
```

### 2. æ ‘èŠ‚ç‚¹ç»„ä»¶

```dart
class StructureTreeNode extends StatelessWidget {
  final String name;
  final String type;
  final List<StructureTreeNode> children;
  final int assetCount;
  final VoidCallback onTap;

  @override
  Widget build(BuildContext context) {
    return ExpansionTile(
      leading: _getIcon(type),
      title: Text(name),
      subtitle: assetCount > 0 ? Text('$assetCount å¼ ç…§ç‰‡') : null,
      children: children.map((child) => child).toList(),
      onTap: onTap,
    );
  }
}
```

---

## ğŸ”„ çŠ¶æ€ç®¡ç†

ä½¿ç”¨ `Provider` è¿›è¡Œè½»é‡çº§çŠ¶æ€ç®¡ç†ï¼š

```dart
// 1. å®šä¹‰çŠ¶æ€ç±»
class StructureProvider extends ChangeNotifier {
  List<Building> _buildings = [];
  bool isLoading = false;

  Future<void> loadStructure(String projectId) async {
    isLoading = true;
    notifyListeners();

    _buildings = await StructureService.getStructure(projectId);

    isLoading = false;
    notifyListeners();
  }
}

// 2. åœ¨åº”ç”¨ä¸­æä¾›çŠ¶æ€
void main() {
  runApp(
    ChangeNotifierProvider(
      create: (_) => StructureProvider(),
      child: MyApp(),
    ),
  );
}

// 3. åœ¨é¡µé¢ä¸­ä½¿ç”¨çŠ¶æ€
class StructureTreePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final provider = context.watch<StructureProvider>();

    if (provider.isLoading) {
      return CircularProgressIndicator();
    }

    return ListView.builder(
      itemCount: provider.buildings.length,
      itemBuilder: (context, index) {
        return BuildingCard(building: provider.buildings[index]);
      },
    );
  }
}
```

---

## âœ… éªŒæ”¶æ ‡å‡†

- [ ] å¯ä»¥æ˜¾ç¤ºé¡¹ç›®åˆ—è¡¨
- [ ] å¯ä»¥æŸ¥çœ‹å·¥ç¨‹ç»“æ„æ ‘
- [ ] å¯ä»¥å±•å¼€/æŠ˜å æ ‘èŠ‚ç‚¹
- [ ] å¯ä»¥ç‚¹å‡»è®¾å¤‡æŸ¥çœ‹èµ„äº§åˆ—è¡¨
- [ ] å¯ä»¥æ˜¾ç¤ºèµ„äº§ç¼©ç•¥å›¾
- [ ] å¯ä»¥ç‚¹å‡»èµ„äº§æŸ¥çœ‹å¤§å›¾
- [ ] ç¦»çº¿æ—¶æ˜¾ç¤ºç¼“å­˜çš„å·¥ç¨‹ç»“æ„
- [ ] æ”¯æŒä¸‹æ‹‰åˆ·æ–°
- [ ] æ”¯æŒæœç´¢é¡¹ç›®

---

## ğŸ“ å¼€å‘ä»»åŠ¡æ¸…å•

### é˜¶æ®µ 1.1ï¼šé¡¹ç›®åˆå§‹åŒ–ï¼ˆ0.5å¤©ï¼‰
- [ ] åˆ›å»º Flutter é¡¹ç›®
- [ ] é…ç½®ä¾èµ–åŒ…
- [ ] è®¾ç½®è·¯ç”±
- [ ] é…ç½® API åŸºç¡€ URL

### é˜¶æ®µ 1.2ï¼šæ•°æ®æ¨¡å‹ï¼ˆ0.5å¤©ï¼‰
- [ ] åˆ›å»º Project æ¨¡å‹
- [ ] åˆ›å»º Structure æ¨¡å‹ï¼ˆBuilding/Zone/System/Deviceï¼‰
- [ ] åˆ›å»º Asset æ¨¡å‹
- [ ] å®ç° JSON åºåˆ—åŒ–

### é˜¶æ®µ 1.3ï¼šAPI æœåŠ¡ï¼ˆ1å¤©ï¼‰
- [ ] å®ç° ApiServiceï¼ˆHTTP å®¢æˆ·ç«¯å°è£…ï¼‰
- [ ] å®ç° StructureServiceï¼ˆè·å–å·¥ç¨‹ç»“æ„ï¼‰
- [ ] å®ç° AssetServiceï¼ˆè·å–èµ„äº§åˆ—è¡¨ï¼‰
- [ ] æ·»åŠ é”™è¯¯å¤„ç†

### é˜¶æ®µ 1.4ï¼šUI å¼€å‘ï¼ˆ2å¤©ï¼‰
- [ ] é¡¹ç›®åˆ—è¡¨é¡µ
- [ ] å·¥ç¨‹ç»“æ„æ ‘é¡µï¼ˆå¯å±•å¼€/æŠ˜å ï¼‰
- [ ] è®¾å¤‡èµ„äº§åˆ—è¡¨é¡µ
- [ ] èµ„äº§å¤§å›¾æŸ¥çœ‹é¡µ

### é˜¶æ®µ 1.5ï¼šä¼˜åŒ–ä¸æµ‹è¯•ï¼ˆ0.5å¤©ï¼‰
- [ ] æ·»åŠ åŠ è½½çŠ¶æ€
- [ ] æ·»åŠ é”™è¯¯æç¤º
- [ ] å®ç°ä¸‹æ‹‰åˆ·æ–°
- [ ] æµ‹è¯•åŠŸèƒ½å®Œæ•´æ€§

---

**æ€»é¢„è®¡å·¥æœŸ**ï¼š4.5 å¤©

---

## ğŸš€ ä¸‹ä¸€æ­¥

Flutter å®‰è£…å®Œæˆåï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹å¼€å‘ï¼š

```bash
# 1. åˆ›å»ºé¡¹ç›®
flutter create bdc_ai_mobile
cd bdc_ai_mobile

# 2. æ·»åŠ ä¾èµ–
# ç¼–è¾‘ pubspec.yamlï¼Œæ·»åŠ ä¸Šè¿°ä¾èµ–

# 3. å®‰è£…ä¾èµ–
flutter pub get

# 4. è¿è¡Œé¡¹ç›®
flutter run
```

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šBDC-AI å¼€å‘å›¢é˜Ÿ
**æœ€åæ›´æ–°**ï¼š2026-01-23
**æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0.0
