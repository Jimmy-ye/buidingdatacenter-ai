# BDC-AI 诊断测试套件 - 使用指南

## 📋 概述

本测试套件通过系统化测试帮助诊断 PC-UI 应用问题。

## 🧪 测试列表

| 测试 | 文件 | 端口 | 目的 |
|-----|------|------|------|
| **测试 1** | `test_nicegui_basic.py` | 8888 | 验证 NiceGUI 基本功能 |
| **测试 2** | `test_imports.py` | - | 检查所有模块导入 |
| **测试 3** | `test_routes.py` | 8889 | 测试路由注册 |
| **测试 4** | `test_pc_app.py` | 8890 | 原始应用诊断 |

---

## 🚀 运行测试

### 方法 1: 运行所有测试

```bash
cd "D:\Huawei Files\华为家庭存储\Programs\program-bdc-ai"
tests\run_all_tests.bat
```

### 方法 2: 单独运行测试

```bash
# 测试 1: NiceGUI 基本功能
python tests\test_nicegui_basic.py
# 访问: http://localhost:8888/test

# 测试 2: 模块导入检查
python tests\test_imports.py

# 测试 3: 路由注册测试
python tests\test_routes.py
# 访问: http://localhost:8889/simple-login

# 测试 4: 原始应用诊断
python tests\test_pc_app.py
# 访问: http://localhost:8890/login
```

---

## 📊 预期结果

### 测试 1: NiceGUI 基本
- **应该看到**: "✅ 测试页面加载成功！"
- **后台应该显示**: "[渲染] 测试页面被调用"

### 测试 2: 模块导入
- **应该显示**: 所有模块为 "✅ 成功"
- **预期**: 5/5 成功

### 测试 3: 路由注册
- **简单登录**: 应该显示登录表单
- **完整登录**: 应该显示完整登录页面

### 测试 4: 原始应用
- **/login**: 应该显示登录表单
- **后台**: 应该显示 "[路由调用] /login"

---

## 🔍 故障排查

### 如果测试 1 失败
- **问题**: NiceGUI 安装问题
- **解决**: 重新安装 NiceGUI (`pip install nicegui --upgrade`)

### 如果测试 2 失败
- **问题**: 模块导入错误
- **检查**: Python 路径、模块依赖

### 如果测试 3 失败
- **问题**: 路由注册问题
- **检查**: 导入顺序、模块加载

### 如果测试 4 失败
- **问题**: PC-App 特定问题
- **检查**: 认证管理器、登录页面模块

---

## 📝 记录结果

为每个测试记录：
1. 成功/失败状态
2. 后台输出（特别是错误信息）
3. 浏览器控制台错误（按 F12）
4. 页面上显示的内容

---

## 📌 注意事项

- 所有测试使用中文输出（已设置 UTF-8 编码）
- 测试运行在不同端口，避免冲突
- 在运行下一个测试前关闭当前测试（Ctrl+C）
- 编码规则详见：`.claude/CODING_RULES.md`
- 快速参考：`.claude/QUICK_ENCODING_GUIDE.md`

---

## 🎯 下一步

根据测试结果：

| 测试 1 | 测试 2 | 测试 3 | 测试 4 | 问题诊断 |
|-------|-------|-------|-------|----------|
| ✅ | ✅ | ✅ | ✅ | 所有功能正常，问题在其他地方 |
| ❌ | - | - | - | NiceGUI 安装问题 |
| ✅ | ❌ | - | - | 模块导入问题 |
| ✅ | ✅ | ❌ | - | 路由注册问题 |
| ✅ | ✅ | ✅ | ❌ | PC-App 特定问题 |
