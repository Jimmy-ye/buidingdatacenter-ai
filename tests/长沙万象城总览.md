---
项目名称: 长沙万象城
项目地点: 湖南省长沙市
建筑类型: 商业
总建筑面积: 283450
GFA面积: 180298
pr_gr_0_1: true
节能技术:
  - 高效冷站
  - 高效灯具
  - 热泵+锅炉供热
  - 群智能
项目类型: 节能低碳咨询
合同里程碑:
  - 阶段: 调试阶段
    交付物:
      - 机电系统调适方案
      - 项目设备设施低碳运行隐患诊断报告
    截止日: 2025-01-01
  - 阶段: 运行阶段
    截止日: 2026-01-01
    交付物:
      - 机电系统运行测试方案
      - 设备性能评估报告
      - 机电系统运行调试报告
      - 建筑运行碳排放评估报告
  - 阶段: 推广成果编制阶段
    交付物:
      - 超低能耗建筑测评
      - 低碳建筑测评
    截止日: 2026-04-01
tags:
  - 总览
---

## 一、项目核心信息
### 1.1 基础信息
>[!tip|200]- 填写指南 
>填写项目的基本信息：项目名称为唯一识别信息保证唯一性；
>节能技术填写举例：高效机房、高效灯具、光伏等；
>项目类型：为合同类型，如全过程咨询、节能诊断等
>

| 项目名称：`VIEW[{项目名称}]`                                                                                     | 项目地点：`INPUT[text(placeholder(省/市)):项目地点]`        |
| :------------------------------------------------------------------------------------------------------ | ------------------------------------------------ |
| 建筑类型：`INPUT[inlineSelect(option(商业),option(办公),option(酒店),option(其他)):建筑类型]`                            | 建筑总面积m2:`INPUT[number(placeholder(数字)):总建筑面积]`   |
| 节能技术: `INPUT[inlineList:节能技术]`                                                                          | GFA面积m2:`INPUT[number(placeholder(数字)):GFA面积]`   |
| 是否有车库:`INPUT[toggle:pr_gr_0_1]`                                                                         | 车库面积m2：`VIEW[({总建筑面积} - {GFA面积}) * {pr_gr_0_1}]` |
| 项目类型：`INPUT[inlineSelect(option(节能低碳咨询),option(节能审计),option(课题研究),option(其他),defaultValue(节能审计)):项目类型]` | 工作归纳：`INPUT[inlineList:工作归纳]`                    |

### 1.2 合同履约
>[!tip|50]- 填写指南 
>此部分是对合同履约文件进行梳理，并追踪文件的进度
>

```js-engine
const mb = engine.getPlugin('obsidian-meta-bind-plugin').api;

const tableOptions = {
	bindTarget: mb.createBindTarget('frontmatter', context.file.path, ['合同里程碑']),
	tableHead: ['阶段', '交付物', '截止日'],
	columns: [
		'INPUT[text(placeholder(按合同填写)):scope^阶段]',
		'INPUT[inlineList:scope^交付物]',
		'INPUT[datePicker:scope^截止日]'
	],
};

const mountable = mb.createTableMountable(context.file.path, tableOptions);

mb.wrapInMDRC(mountable, container, component);
```

^36ebcf

### 1.3 合同履约分解
>[!tip]- 指南
>建议用白板链接展示


`![[工作/长沙万象城/长沙万象城任务分解.canvas]]


## 二、任务追踪
### 2.1 日常待办
>[!WARNING|200]- 注意：无需填写
>此部分与日常记录的待办、已办事项联动，无需手动调整


> [!multi-column]
>
> > [!note]+ 日常待办
>>```dataview
> > TASK
> > From "日记"
> > WHERE contains(text, "#"+ this.项目名称) AND !completed
> > SORT 紧急性
> > ```
> 
> >[!note]+ 会议待办
> >```dataview
> >TASK
> >FROM "会议"
> >WHERE 项目名称 = this.项目名称 AND !completed
> >GROUP by file.name
> >```

---
### 2.2 会议纪要汇总
```dataviewjs
// 获取当前项目名称
const currProject = dv.current().项目名称;

// 构建会议查询
const meetings = dv.pages('"会议"')
  .where(m => m.项目名称 === currProject)
  .sort(m => m.file.ctime, 'desc');

// 构建展示表格
if (meetings.length > 0) {
  dv.table(
    ["会议链接","会议日期",  "会议摘要"],
    meetings.map(m => [
      m.file.link,
      m.会议时间,
      m.会议总结 ? m.会议总结.slice(0,80) + '...' : '无摘要'
    ])
  );
} else {
  dv.span("⚠️ 尚未创建相关会议记录");
}
```


### 2.3 合同履约追踪 
```dataviewjs
// 获取当前项目的名称
const projectName = dv.current().项目名称;
const folderPath = `工作/${projectName}/合同履约`;
const files = dv.pages(`"${folderPath}"`).where(p => p.项目名称 === projectName);
const milestones = dv.current().合同里程碑;

let tableData = [];
if (!Array.isArray(milestones)) {
    dv.span("❌ 错误：合同里程碑数据格式不正确，应为数组。");
} else {
    tableData = milestones.flatMap(milestone => {
        if (!milestone?.交付物 || !milestone?.截止日) return [];
        
        return milestone.交付物.map(deliverable => {
            const file = files.find(f => 
                f["交付物"]?.trim() === deliverable.trim() && 
                f["阶段"]?.trim() === milestone.阶段?.trim()
            );
            
            const progress = file ? (file.文件进度 || 0) : "未创建";
            const icon = progress === 100 ? "✅" : 
                        progress > 0 ? "⏳" : 
                        "❌";
            
            return [
                milestone.阶段,
                deliverable,
                moment(milestone.截止日).format("YYYY-MM-DD"),
                `${icon} ${progress}`,
                file ? file.file.link : "无"
            ];
        });
    });

    if (tableData.length > 0) {
        dv.table(["阶段", "交付物", "截止日", "进度", "文件"], tableData);
    } else {
        dv.span("⚠️ 未找到有效的合同里程碑数据");
    }
}
```


### 2.4 其他
> [!done]- 已完成项
> ```dataview
>   TASK
>   From ""
>   WHERE contains(text, "#"+ this.项目名称) OR  项目名称 = this.项目名称 AND completed
> ```
- 其他信息备注1
- 信息备注2
- 备注3
- 备注4
- 