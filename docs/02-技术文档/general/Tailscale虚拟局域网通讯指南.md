# Tailscale è¿œç¨‹é€šè®¯æŒ‡å—

**ç”Ÿæˆæ—¶é—´**: 2026-01-25 16:00
**æœåŠ¡çŠ¶æ€**: âœ… è¿è¡Œä¸­

---

## ğŸŒ è¿œç¨‹é€šè®¯åœ°å€

### ä¸»è¦è®¿é—®åœ°å€

```
http://100.93.101.76:8000
```

### å„æœåŠ¡ç«¯ç‚¹

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| **API åŸºç¡€åœ°å€** | http://100.93.101.76:8000 | FastAPI åç«¯æœåŠ¡ |
| **å¥åº·æ£€æŸ¥** | http://100.93.101.76:8000/api/v1/health | æœåŠ¡çŠ¶æ€æ£€æŸ¥ |
| **API æ–‡æ¡£ (Swagger)** | http://100.93.101.76:8000/docs | äº¤äº’å¼ API æ–‡æ¡£ |
| **API æ–‡æ¡£ (ReDoc)** | http://100.93.101.76:8000/redoc | ReDoc æ ¼å¼æ–‡æ¡£ |

---

## ğŸ“‹ å‰ç½®æ¡ä»¶

### åœ¨å¦ä¸€å°ç”µè„‘ä¸Šéœ€è¦ï¼š

1. **å®‰è£… Tailscale**
   - Windows: https://tailscale.com/download/windows
   - macOS: https://tailscale.com/download/macos
   - Linux: https://tailscale.com/download/linux

2. **ç™»å½• Tailscale**
   - ä½¿ç”¨ä¸æœåŠ¡å™¨ç›¸åŒçš„è´¦å·ç™»å½•
   - ç¡®è®¤è¿æ¥çŠ¶æ€ä¸º "Connected"

3. **éªŒè¯è¿æ¥**
   ```bash
   # æŸ¥çœ‹ Tailscale IP
   tailscale ip -4

   # æŸ¥çœ‹è¿æ¥çŠ¶æ€
   tailscale status

   # åº”è¯¥èƒ½çœ‹åˆ°æœåŠ¡å™¨çš„ IP: 100.93.101.76
   ```

---

## ğŸ”§ é…ç½®æ­¥éª¤

### æ­¥éª¤ 1: åœ¨å®¢æˆ·ç«¯ç”µè„‘ä¸Šå®‰è£… Tailscale

**Windows**:
1. ä¸‹è½½ `Tailscale Setup.exe`
2. åŒå‡»å®‰è£…
3. æ‰“å¼€æµè§ˆå™¨ç™»å½•

**Linux**:
```bash
# Ubuntu/Debian
curl -fsSL https://tailscale.com/install.sh | sh

# ç™»å½•
sudo tailscale up
```

### æ­¥éª¤ 2: éªŒè¯ Tailscale è¿æ¥

å®‰è£…å®Œæˆåï¼Œåœ¨å®¢æˆ·ç«¯ç”µè„‘ä¸Šæ‰§è¡Œï¼š

```bash
# Windows PowerShell
tailscale status

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# 100.93.101.76  desktop-bfpk00r  Jimmy-ye@  windows  -
```

### æ­¥éª¤ 3: æµ‹è¯•æœåŠ¡å™¨è¿æ¥

```bash
# æµ‹è¯•æœåŠ¡å™¨æ˜¯å¦å¯è¾¾
ping 100.93.101.76

# æµ‹è¯•åç«¯æœåŠ¡
curl http://100.93.101.76:8000/api/v1/health

# æˆ–åœ¨æµè§ˆå™¨æ‰“å¼€
start http://100.93.101.76:8000/docs
```

---

## ğŸ’» å®¢æˆ·ç«¯é…ç½®

### é…ç½®ç§»åŠ¨ç«¯ (Flutter)

åœ¨ç§»åŠ¨ç«¯åº”ç”¨çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š

```dart
// lib/config/api_config.dart
class ApiConfig {
  // ä½¿ç”¨ Tailscale IP
  static const String backendUrl = 'http://100.93.101.76:8000';

  // API ç«¯ç‚¹
  static const String health = '/api/v1/health';
  static const String projects = '/api/v1/projects';
  static const String assets = '/api/v1/assets';
}
```

### é…ç½® PC ç«¯åº”ç”¨

åœ¨ PC ç«¯åº”ç”¨çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š

**ç¯å¢ƒå˜é‡æ–¹å¼**:
```bash
# Windows PowerShell
$env:BDC_BACKEND_URL="http://100.93.101.76:8000"

# æ°¸ä¹…è®¾ç½®
[System.Environment]::SetEnvironmentVariable('BDC_BACKEND_URL', 'http://100.93.101.76:8000', 'User')
```

**é…ç½®æ–‡ä»¶æ–¹å¼**:
```json
{
  "backend_url": "http://100.93.101.76:8000",
  "tailscale_ip": "100.93.101.76",
  "backend_port": 8000
}
```

---

## ğŸ§ª æµ‹è¯•è¿æ¥

### åŸºç¡€è¿æ¥æµ‹è¯•

```bash
# 1. æµ‹è¯•ç½‘ç»œè¿é€šæ€§
ping 100.93.101.76

# 2. æµ‹è¯•ç«¯å£å¯è¾¾æ€§
curl http://100.93.101.76:8000/api/v1/health

# é¢„æœŸå“åº”:
# {"status":"ok"}

# 3. æµ‹è¯• API æ–‡æ¡£è®¿é—®
# åœ¨æµè§ˆå™¨æ‰“å¼€: http://100.93.101.76:8000/docs
```

### API æµ‹è¯•ç¤ºä¾‹

```bash
# è·å–é¡¹ç›®åˆ—è¡¨
curl http://100.93.101.76:8000/api/v1/projects/

# åˆ›å»ºæ–°é¡¹ç›®
curl -X POST http://100.93.101.76:8000/api/v1/projects/ \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æµ‹è¯•é¡¹ç›®",
    "client": "æµ‹è¯•å®¢æˆ·",
    "location": "æµ‹è¯•åœ°ç‚¹",
    "status": "active"
  }'
```

---

## ğŸ”’ å®‰å…¨è¯´æ˜

### Tailscale ç½‘ç»œç‰¹æ€§

- âœ… **ç«¯åˆ°ç«¯åŠ å¯†**: æ‰€æœ‰é€šè®¯é€šè¿‡ WireGuard åŠ å¯†
- âœ… **ç§æœ‰ç½‘ç»œ**: åªæœ‰ç™»å½•ç›¸åŒè´¦å·çš„è®¾å¤‡æ‰èƒ½è®¿é—®
- âœ… **æ— éœ€ç«¯å£æ˜ å°„**: æ— éœ€é…ç½®è·¯ç”±å™¨
- âœ… **è‡ªåŠ¨é‡è¿**: ç½‘ç»œå˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°è¿æ¥

### è®¿é—®æ§åˆ¶

å½“å‰é…ç½®ä¸º**å¼€æ”¾æ¨¡å¼**ï¼ˆåŒä¸€ Tailnet å†…çš„æ‰€æœ‰è®¾å¤‡å¯è®¿é—®ï¼‰ã€‚

å¦‚éœ€é™åˆ¶è®¿é—®ï¼Œå¯ä»¥åœ¨ Tailscale ç®¡ç†æ§åˆ¶å°é…ç½® ACLï¼š

```json
{
  "acls": [
    {
      "action": "accept",
      "src": ["tag:client"],
      "dst": ["100.93.101.76:8000"]
    }
  ]
}
```

---

## ğŸ“Š æœåŠ¡å™¨çŠ¶æ€

### å½“å‰é…ç½®

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| **æœåŠ¡å™¨åç§°** | desktop-bfpk00r |
| **Tailscale IP** | 100.93.101.76 |
| **åç«¯ç«¯å£** | 8000 |
| **ç›‘å¬åœ°å€** | 0.0.0.0ï¼ˆå…è®¸å¤–éƒ¨è®¿é—®ï¼‰ |
| **æœåŠ¡çŠ¶æ€** | âœ… è¿è¡Œä¸­ |
| **å¥åº·æ£€æŸ¥** | âœ… æ­£å¸¸ |

### æœåŠ¡ä¿¡æ¯

```
FastAPI åç«¯æœåŠ¡
- ç‰ˆæœ¬: 0.1.0
- ç›‘å¬: 0.0.0.0:8000
- è‡ªåŠ¨é‡è½½: å¯ç”¨
- æ•°æ®åº“: PostgreSQL (bdc_ai)
```

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨

**ç—‡çŠ¶**: `curl` æˆ–æµè§ˆå™¨æ— æ³•è®¿é—® `http://100.93.101.76:8000`

**æ’æŸ¥æ­¥éª¤**:

1. **æ£€æŸ¥ Tailscale çŠ¶æ€**
   ```bash
   tailscale status
   ```

2. **æ£€æŸ¥æœåŠ¡å™¨ IP**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š
   tailscale ip -4
   # åº”è¯¥è¾“å‡º: 100.93.101.76
   ```

3. **æµ‹è¯•ç½‘ç»œè¿é€šæ€§**
   ```bash
   ping 100.93.101.76
   ```

4. **æ£€æŸ¥åç«¯æœåŠ¡**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š
   netstat -ano | findstr :8000
   # åº”è¯¥çœ‹åˆ°: 0.0.0.0:8000
   ```

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿ Tailscale åœ¨ä¸¤å°è®¾å¤‡ä¸Šéƒ½å·²ç™»å½•
- é‡å¯ Tailscale: `tailscale down && tailscale up`
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### é—®é¢˜ 2: è¿æ¥è¶…æ—¶

**ç—‡çŠ¶**: è¯·æ±‚è¶…æ—¶æˆ–æ— å“åº”

**æ’æŸ¥æ­¥éª¤**:

1. **æ£€æŸ¥æœåŠ¡å™¨è¿›ç¨‹**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š
   tasklist | findstr python
   ```

2. **æŸ¥çœ‹æœåŠ¡æ—¥å¿—**
   ```bash
   # åç«¯æ—¥å¿—åœ¨æ§åˆ¶å°è¾“å‡º
   # æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
   ```

3. **æµ‹è¯•æœ¬åœ°è®¿é—®**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š
   curl http://localhost:8000/api/v1/health
   ```

**è§£å†³æ–¹æ¡ˆ**:
- é‡å¯åç«¯æœåŠ¡
- æ£€æŸ¥æ•°æ®åº“è¿æ¥
- æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™

### é—®é¢˜ 3: æƒé™é”™è¯¯

**ç—‡çŠ¶**: API è¿”å› 401 æˆ– 403 é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ˜¯å¦éœ€è¦è®¤è¯ token
- ç¡®è®¤ç”¨æˆ·æƒé™
- æŸ¥çœ‹ API æ–‡æ¡£äº†è§£è®¤è¯æ–¹å¼

---

## ğŸ“± ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: ç§»åŠ¨ç«¯è®¿é—®æœåŠ¡å™¨

```
ç§»åŠ¨è®¾å¤‡ï¼ˆTailscaleå®¢æˆ·ç«¯ï¼‰
    â†“
Tailscale VPN
    â†“
æœåŠ¡å™¨ (100.93.101.76:8000)
    â†“
FastAPI åç«¯æœåŠ¡
```

### åœºæ™¯ 2: PC ç«¯è®¿é—®æœåŠ¡å™¨

```
PC åº”ç”¨
    â†“
é…ç½®åç«¯åœ°å€: http://100.93.101.76:8000
    â†“
Tailscale VPNï¼ˆå¦‚æœéœ€è¦ï¼‰
    â†“
æœåŠ¡å™¨
    â†“
FastAPI åç«¯æœåŠ¡
```

### åœºæ™¯ 3: å¤šè®¾å¤‡åä½œ

```
ç§»åŠ¨è®¾å¤‡ A (Tailscale IP: 100.93.101.77)
    â†“
PC è®¾å¤‡ B (Tailscale IP: 100.93.101.78)
    â†“
æœåŠ¡å™¨ (Tailscale IP: 100.93.101.76)
    â†“
æ‰€æœ‰è®¾å¤‡åœ¨åŒä¸€è™šæ‹Ÿå±€åŸŸç½‘ä¸­
```

---

## ğŸ”„ æœåŠ¡å™¨ç®¡ç†

### å¯åŠ¨æœåŠ¡å™¨

```bash
# æ–¹æ³• 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬
cd D:\BDC-AI
scripts\Windows\å¯åŠ¨åç«¯æœåŠ¡.bat

# æ–¹æ³• 2: æ‰‹åŠ¨å¯åŠ¨
cd D:\BDC-AI
venv\Scripts\python.exe -m uvicorn services.backend.app.main:app --host 0.0.0.0 --port 8000 --reload
```

### åœæ­¢æœåŠ¡å™¨

åœ¨åç«¯æœåŠ¡çª—å£æŒ‰ `Ctrl+C`

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :8000

# æ£€æŸ¥è¿›ç¨‹
tasklist | findstr python

# æµ‹è¯•æœåŠ¡
curl http://localhost:8000/api/v1/health
```

---

## ğŸ“ å¿«é€Ÿå‚è€ƒ

### é‡è¦åœ°å€

```
æœåŠ¡å™¨ Tailscale IP: 100.93.101.76
åç«¯æœåŠ¡åœ°å€: http://100.93.101.76:8000
API æ–‡æ¡£: http://100.93.101.76:8000/docs
å¥åº·æ£€æŸ¥: http://100.93.101.76:8000/api/v1/health
```

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹ Tailscale çŠ¶æ€
tailscale status

# æµ‹è¯•æœåŠ¡å™¨è¿æ¥
curl http://100.93.101.76:8000/api/v1/health

# é‡å¯ Tailscale
tailscale down && tailscale up

# æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
# åœ¨æœåŠ¡å™¨æœºå™¨ä¸ŠæŸ¥çœ‹åç«¯æ§åˆ¶å°è¾“å‡º
```

---

## âœ… æ£€æŸ¥æ¸…å•

åœ¨å¦ä¸€å°ç”µè„‘ä¸Šè®¿é—®å‰ï¼Œè¯·ç¡®è®¤ï¼š

**æœåŠ¡å™¨ç«¯**:
- [x] åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆç«¯å£ 8000ï¼‰
- [x] Tailscale å·²ç™»å½•å¹¶è¿æ¥
- [x] æœåŠ¡ç›‘å¬åœ¨ 0.0.0.0ï¼ˆå…è®¸å¤–éƒ¨è®¿é—®ï¼‰
- [x] é˜²ç«å¢™è§„åˆ™å·²é…ç½®

**å®¢æˆ·ç«¯**:
- [ ] Tailscale å·²å®‰è£…
- [ ] Tailscale å·²ç™»å½•ï¼ˆä¸æœåŠ¡å™¨ç›¸åŒè´¦å·ï¼‰
- [ ] Tailscale è¿æ¥çŠ¶æ€ä¸º "Connected"
- [ ] å¯ä»¥ ping é€š 100.93.101.76
- [ ] å¯ä»¥è®¿é—® http://100.93.101.76:8000/api/v1/health

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨ä½ å¯ä»¥åœ¨ä»»ä½•å·²ç™»å½• Tailscale çš„è®¾å¤‡ä¸Šè®¿é—®æœåŠ¡å™¨ï¼š

```
http://100.93.101.76:8000
```

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€
