# BDC-AI 快速启动脚本

**用途**: 快速启动 BDC-AI 系统的各个服务

---

## 📁 脚本说明

### 1️⃣ 一键启动所有服务.bat

**功能**: 按顺序启动所有服务（后端 → Worker → PC-UI）

**使用场景**: 日常开发，需要完整启动系统

**说明**:
- 每个服务在独立窗口中运行
- 自动打开浏览器（API 文档 + PC-UI）
- 关闭窗口即停止对应服务

---

### 2️⃣ 启动后端服务.bat

**功能**: 启动 FastAPI 后端服务

**地址**: http://localhost:8000
**API 文档**: http://localhost:8000/docs

**说明**:
- 使用虚拟环境: `venv\Scripts\python.exe`
- 启用热重载（--reload）
- 从项目根目录启动（避免模块找不到）

---

### 3️⃣ 启动PC-UI.bat

**功能**: 启动 NiceGUI PC-UI 前端

**地址**: http://localhost:8080

**说明**:
- 需要先启动后端服务
- 使用虚拟环境: `venv\Scripts\python.exe`
- 登录凭证: yerui/ye123456 或 admin/admin123

---

### 4️⃣ 启动Worker.bat

**功能**: 启动 GLM-4V 场景问题分析 Worker

**说明**:
- 需要先启动后端服务
- 自动检查并安装依赖
- 轮询间隔: 600 秒（10分钟）

---

### 5️⃣ 启动管理界面.bat

**功能**: 启动账号权限管理界面（独立管理工具）

**地址**: http://localhost:8081

**功能模块**:
- 📋 用户管理 - 创建、编辑、删除用户，重置密码
- 👥 角色管理 - 创建、编辑角色，配置权限
- 🔐 权限查看 - 查看所有权限，按资源统计
- 📝 审计日志 - 查看系统操作日志

**说明**:
- 需要先启动后端服务
- 独立端口运行（8081），不与 PC-UI 冲突
- 登录凭证: yerui/ye123456 或 admin/admin123
- 仅管理员账号可访问

**使用场景**:
- 管理用户账号和权限
- 配置角色和权限分配
- 查看系统审计日志
- 快速进行用户管理操作

---

### 6️⃣ 启动监控.bat

**功能**: 启动后台监控系统

**监控内容**:
- 后端服务状态与响应时间
- 客户端连接数统计
- 请求速率（每分钟请求数）
- 成功率与平均响应时间
- 最近请求记录

**说明**:
- 每 30 秒自动刷新
- 专注于通讯相关指标
- 实时显示客户端连接
- 统计请求速率和响应时间
- 按 Ctrl+C 停止监控

**使用场景**:
- 监控客户端与后端通讯状态
- 观察请求速率和响应时间
- 调试接口性能问题
- 查看客户端连接数

---

### 7️⃣ 停止所有服务.bat

**功能**: 停止所有运行中的服务

**说明**:
- 停止后端（端口 8000）
- 停止 PC-UI（端口 8080）
- 停止 Worker（端口 8001）

---

## 🚀 快速开始

### 开发环境启动

**方式 1: 一键启动（推荐）**
```bash
双击运行: 一键启动所有服务.bat
```

**方式 2: 逐个启动**
```bash
1. 双击: 启动后端服务.bat
2. 双击: 启动Worker.bat
3. 双击: 启动PC-UI.bat
```

---

## ⚠️ 常见问题

### 问题 1: ModuleNotFoundError: No module named 'shared'

**原因**: 从错误的目录启动后端

**解决**: 使用本目录中的启动脚本，确保从项目根目录（`D:\BDC-AI`）启动

---

### 问题 2: PC-UI 登录后权限为 0

**原因**:
1. 后端未从根目录启动
2. 数据库权限未初始化

**解决**:
1. 停止所有服务（使用停止所有服务.bat）
2. 重新启动后端（使用启动后端服务.bat）
3. 初始化权限：`python scripts/Windows/init_auth_data.py`
4. 验证权限：`python scripts/测试/test_yerui_permissions.py`

---

### 问题 3: 端口已被占用

**解决**:
```bash
# 停止所有服务
双击运行: 停止所有服务.bat
```

---

## 📚 相关文档

- **使用指南**: `docs/04-使用指南/`
- **权限测试**: `scripts/测试/test_yerui_permissions.py`
- **权限修复指南**: `docs/03-优化记录/权限初始化修复计划.md`

---

**维护**: BDC-AI 开发团队
**最后更新**: 2026-01-26
